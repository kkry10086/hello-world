			16 进程管理与SELinux初探

16.1什么是进程(process)
  在linux系统当中:[触发任何一个事件时,系统都会将他定义成为一个进程,并且给予这个进程一个ID,称为PID,同时依据启发这个进程的用户与相关属性关系,给予这个PID一组有效的权限设定.]

  16.1.1 进程与程序(process&program)
  进程的产生:执行一个程序或指令,然后就可以触发一个事件从取得一个PID.系统只认识二进制文件(binary file),binary file就是程序(program).
  进程一般是放置在实体磁盘中,然后透过用户的执行来触发.出发后会加载到内存中成为一个个体,那就是进程.为了操作系统可以管理这个进程,因此进程有给予执行者的权限/属性等参数,并包括程序所需要脚本与数据或文件数据等,最后再给予一个PID.系统就是透过这个PID来判断该process是否具有权限进行工作.当执行指令时,这个进程衍生出来的其他进程在一般状态下,也会沿用这个进程的相关权限.

  总结:
  程序(program):通常为binary program,放置在储存媒体中,为实体文件的形态存在.
  进程(process):程序被触发后,执行者的权限与属性,程序的程序代码与所需数据等都会被加载内存中,操作系统并给予这个内存内的单位一个标识符(PID),可以说,进程就是一个正在运行中的程序.

   1.子进程与父进程:
   我们使用bash这个shell程序时,使用touch等指令时,这个指令会产生一个新的进程,这个新的进程就是子进程,而产生这个子进程的bash进程就是父进程.

   2.fork and exec: 进程呼叫的流程
   在linux的进程呼叫通常成为fork-and-exec的流程.进程都会皆由父进程以复制(fork)的方式产生一个一模一样的子进程(此时更应该称为暂存进程),然后被复制出来的子进程再以exec的方式来执行实际要进行的程序,最终就成为一个子进程的存在.因此父进程与子进程的差别就在与PID和PPID,执行的程序,两者的环境基本相同.

   3.系统与网络服务:常驻在内存的进程
   我们知道系统每分钟都会去扫描/etc/crontab以及相关的配置文件,来进行工作排程.那么这个工作排程是谁负责?是crond这个程序所管理的,我们将它启动在背景当中一直持续不断的运作,这就是常驻在内存中的进程.
   
   常驻在内存当中的进程通常是负责一些系统所提供的功能以服务用户各项任务,因此这些常驻程序就会被我们称为:服务(daemon).系统的服务非常多,不过主要大致分成系统本身所需要的服务,还有一些则是负责网络联机的服务,而网络服务比较有趣的地方,在于这些程序被执行后,它们会启动一个可以负责网络监听的端口(port),以提供外部客户端(client)的联机要求.
   

  16.1.2 Linux的多人多任务环境

    1.多人环境:
      linux最棒的地方就在于它的多人多任务环境.在Linux系统上面具有多种不同的账号,每 种账号都有其特殊的权限,只有一个人具有至高无上的权利,那就是root(系统管理员).除了root之外,其他人都必须要受一些限制,而每个人进入linux的环境设定都可以随着每个人的喜好来设定.
    2.多任务行为:
      CPU切换进程的工作,与这些工作进入到CPU运作的排程会影响到系统的整体效能.目前Linux使用的多任务切换行为是非常棒的一个机制,几乎可以将PC的性能整个压榨出来.由于效能非常好,因此当多人同时登陆系统时,会感觉整部主机好像是为了你存在一般.
 
    3.多重登入环境的七个基本终端窗口:
      在Linux当中,默认提供了六个文字界面登入窗口,以及一个图形界面,可以使用[alt]+[FN]来切换不同的终端机界面.细节部分19章学习.

    4.特殊的进程管理行为:
      Linux几乎可以说绝对不会当机(kkry我就有过一次,当然电脑差是一个重要原因),因为它可以在任何时候,将某个被困住的进程杀掉,然后在重新执行该进程而不用重新启动.如果我们在某一个终端界面挂了,就可以切换其他的界面.然后使用pa -aux,找到错误进程,然后kill.

    5.bash环境下的工作管理(job control):
      其实当你使用apt update 和apt upgrade这时有时会要很长的时间来更新,会给你一个终端只能执行一个任务.但是你可以在命令的后面加上&符号,将其放在背景完成,这样就可以继续使用bash来执行工作.

    6.多人多任务的系统资源分配问题考虑:
      多人多任务的确有很多的好处,但其实也有管理上的困扰,因为使用者越来越多,将导致你管理上的困扰.另外,当使用者达到一定数量后,你的机器便需要省级,因为CPU的运算与RAM的大小可能就会不够使用.


16.2 工作管理(job control)
  