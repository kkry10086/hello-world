# 第十章

## 10.1引言

信号是Linux进程间通信的最古老的方式，信号是软件中断。它是在软件层次上对中断机制的一种
模拟是一种异步通信的方式，信号可以导致一个正在运行的异步进程终端，转而处理某一个突发事件。

## 10.2 信号的特点：
1.简单
2.不能携带大量信息
3.满足某个特定条件才发送

信号可以直接进行用户空间进程和内核空间进程的交互，内核进程可以用它来通知用户空间进程发生了哪些系统事件。
一个完整的信号周期包括三个部分：信号的产生、信号在进程中的注册、信号在进程中的注销，执行信号处理函数。

## 10.3信号的编号

kill -l可以看到那些信号编号与名称。


## 10.4信号四要素

1.编号
2.名称
3.时间
4.默认处理动作

man 7 signal可以查看功能

## 10.5信号的状态

### 1).产生

```
a.当用户按某些终端按键时，将产生信号。
  终端上按ctrl+c通常产生中断信号SIGINT
  终端上按ctrl+\通常产生中断信号SIGQUIT
  
b.硬件异常将产生信号
  除数为0，无效的内存访问等，这些情况通常由硬件检测到，并通知内核，然后内核产生适当的信号发送给相应的进程
  
c.软件异常将产生信号
  当检测到某种软件条件已发生如：定时器alarm，并将其通知有关进程时，产生信号。

d.调用系统函数如：kill,raise,abort等讲发送信号
  注意接受信号和发送信号进程的所有者必须相同，或者发送信号进程的所有者必须是超级用户。
  
e.运行kill/killall命令将发送信号
  此程序实际上是使用kill函数库来发送信号。

```

### 2).未决状态：没有被处理

### 3.)递达状态：信号被处理了


## 10.6阻塞信号集和未决信号集

信号的实现手段导致信号有很强的延时性，但对于用户非常短，不易察觉。
Linux内核的进程控制块PCB是一个结构体，也包含了信号相关的信息，主要指阻塞信号集和未决信号集。

### 10.6.1阻塞信号集（信号屏蔽字）
  将某些信号加入集合，对它们设置屏蔽，当屏蔽x信号后，再收到该信号，该信号的处理将退后（处理发生在解除屏蔽幕后）。

### 10.6.2未决信号集
  信号产生，未决信号集中描述该信号的位 立刻 转为1，表示信号处于未决状态。当信号被处理，对应位变为0，这一时刻非常短。
  该信号的产生由于某些原因（主要是阻塞）不能抵达，这类信号的集合称之为未决信号。在屏蔽解除前信号一直处于未决状态。

## 10.7信号产生函数

1.kill函数
2.raise函数
3.abort函数
4.alarm函数
5.settimer函数

