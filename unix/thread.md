#  线程

## 一、 线程概念
许多经典的操作系统教科书中，总是把进程定义为程序的执行实例，它并不执行什么，只是维护在应用程序所需的各种资源，而线程则是真正的执行实体。
所以线程是轻量级的进程（LWP：light weight process），在Linux环境下线程本质仍是进程。
为了进程完成一定的工作，进程必须至少包含一个线程。
|<font color=Red >进程</font>|
|:-:|
|<font color=Red >线程A栈</font>|
|<font color=Red >线程B栈</font>|
|堆区|
|BSS区|
|数据区|
|代码区|


<font color=Red >注意：</font> 
<font color=Red >1. 进程是CPU分配资源的最小单位</font>
<font color=Red >2. 线程是CPU调度的最小单位</font> 


## 二、线程特点

1. 线程也有PCB，创建线程(pthread_create)和创建进程(fork)的底层函数都是clone()。
2. 从内核里看，线程与进程是一样的，各自有不同的PCB，因此线程又是轻量级进程。
3. 进程可以蜕变成线程。

### 1.线程与进程在实现上的区别

: 如果**复制**对方的地址空间，就会产生一个<font color=Red>进程</font>
: 如果**共享**对方的地址空间，就会产生一个<font color=Red>线程</font>

Linux是不区分进程与线程的，只在用户层面上作出区分。

##  三、线程共享资源

1. 文件描述符表
2. 每种信号的处理方式
3. 当前工作目录
4. 用户ID与组ID
5. 内存地址空间（.txt/.bss/.data/heap/共享库）


## 四、线程非共享资源

1. 线程ID
2. 处理器现场和栈指针（内核栈）
3. 独立的栈空间（用户空间栈）
4. errno变量
5. 信号屏蔽字
6. 调度优先级

## 五、线程的优缺点

### 1.优点
提高程序并发行
开销小
数据通信，共享数据方便

### 2.缺点
库函数不稳定
测试、编写困难，GDB不支持
对信号支持不好


## 六、线程常用操作：
### 6.1线程号

